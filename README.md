# BetterSleep - iOS睡眠声音监测应用

BetterSleep是一款iOS应用，能够监测您的睡眠状况，识别并记录睡眠过程中的鼾声和梦话，帮助您更好地了解自己的睡眠质量。

## 功能特点

- **睡眠数据整合**：通过HealthKit API获取和分析睡眠数据
- **声音监测**：夜间持续录音并分析睡眠声音
- **AI声音识别**：智能区分鼾声和梦话
- **片段记录**：自动截取并保存鼾声和梦话片段
- **简单播放**：轻松回放检测到的声音片段

## 项目结构

```
BetterSleep/
├── Sources/
│   └── BetterSleep/
│       ├── SleepApp.swift          # 应用入口
│       ├── ContentView.swift       # 主界面
│       ├── SleepDataManager.swift  # 健康数据管理
│       ├── AudioRecorder.swift     # 音频录制
│       ├── RecordingManager.swift  # 录音管理
│       └── AudioClassifier.swift   # 音频分类(AI)
├── project.yml                     # 项目配置
└── README.md                       # 项目说明
```

## 技术实现

### 健康数据集成
- 使用HealthKit框架读取和写入睡眠数据
- 支持获取历史睡眠记录进行分析

### 音频处理
- AVAudioRecorder实现后台录音
- 音频分段分析，降低资源消耗
- 本地音频文件管理

### AI声音识别
- Core ML模型进行声音分类
- 区分鼾声、梦话和环境音
- 语音识别提取梦话内容

## 权限要求

- 健康数据访问权限
- 麦克风录音权限
- 语音识别权限
- 后台音频播放权限

## 如何构建和运行

1. 确保您的开发环境满足：
   - Xcode 13.0+ 
   - iOS 15.0+ SDK
   - Swift 5.5+

2. 克隆或下载项目到本地

3. 打开项目：
   ```bash
   open BetterSleep.xcodeproj
   ```

4. 选择目标设备并运行

## 注意事项

- 本应用需要在iPhone上运行，不支持模拟器
- 持续录音可能会消耗较多电量，请确保设备电量充足
- AI声音识别模型需要进一步训练以提高准确性
- 所有录音和分析均在本地进行，保护用户隐私

## 后续改进

- [ ] 添加睡眠质量评分功能
- [ ] 实现梦话文本转录
- [ ] 添加睡眠趋势分析图表
- [ ] 优化AI模型提高识别准确率
- [ ] 添加云同步功能

## 许可证

本项目采用MIT许可证 - 详情参见LICENSE文件